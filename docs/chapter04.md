

**즉 테스트 코드는 강력한 버그 검출 도구 버그를 찾는 시간을 대폭 줄여준다.**

테스트 추가는 public 메소드로 되어있는 모든 메소드를 테스트 하는게 아니다.
위험요인을 기준으로 테스트를 작성해야 한다.
즉 적은 수의 테스트로도 충분한 효과를 누릴 수 있어야 한다.
**테스트의 목적은 향후 버그를 찾기 위함이다. 이를 알고가자.**
그러므로 get() 과 set() 과 같은 단순 메소드들은 테스트할 필요가 없다.

given절 데이터 공유하는 방법

bad case
```java
class ProvinceTest {

    Province sampleProvince = SampleProvinceFactory.getSampleProvince();

    @Test
    void shortfallTest(){
        //given
        int answer = 5;
        //when
        int result = sampleProvince.shortFall();
        //then
        assertEquals(answer, result);
    }

```

good case
```java
    Province sampleProvince;

    @BeforeEach
    void setUp() {
        sampleProvince = SampleProvinceFactory.getSampleProvince();
    }

@Test
void shortfallTest(){
    //given
    int answer = 5;
    //when
    int result = sampleProvince.shortFall();
    //then
    assertEquals(answer, result);
}

```

테스트가 개발 속도를 높여준다는 말은 있지만 테스트에 너무 집착하다 보면 기능을 추가하는 의욕이 떨어질 수 있다.
테스트는 위험한 부분을 위주로 작성하는게 좋다.
또 코드가 복잡한 부분을 찾아보자 이는 틀릴 여지가 많기 떄문에 테스트를 추가해서 검증하는게 좋다.

테스트를 할 때 명심해야 하는 생각이 항상 처음부터 완벽한 테스트 케이스를 모두 갖출 순 없다.
그러므로 버그 리포트를 만날 때 마다 해당 테스트 케이스부터 작성해두자.

테스트 커버리지는 코드에서 테스트 하지 않은 부분을 찾는 것이지 코드 자체를 모두 테스트 한 것은 아니다.
그러므로 커버리지가 높다라는 것이 모든 경우를 테스트 한 것은 아니다.

==

API 테스트로는 뒤에 있는 복잡한 로직을 테스트하기 힘들다

나는 도메인은 타이핑을 끝난 순간에 바로 테스트를 작성

TDD를 잘 익히는 건 굉장한 시간이 든다
최소 1년은 매일 훈련
잘하기 진짜 어려운 기술임

테스트는 인터페이스를 테스트하는거임, 구현을 테스트하는건 아님
테스트 코드도 당연히 리팩토링 해야됨(중복 안됨)

대부분의 사람들한테 TDD를 권장하지 않음

코드를 어떻게 구현해야 할지 모르겠을때만 TDD
도메인 로직을 테스트할때만 TDD

테스트 만드는 타이밍은 기능 구현 후 바로!(가능한 빨리, 시간을 오래 끌지 마셈)

TDD의 딱 하나 좋은점은 실패하는 테스트를 경험할 수 있다는 거다
성공하는 테스트만 짜면 의미없는 테스트를 작성할 수 있다

리팩토링할때는 테스트 코드 먼저 작성 후 해야 됨(반드시)
테스트 코드가 잘 작성이되서 프로덕션 로직이 잘못됬을때 오류가 발생하는지 확인 필요

테스트 코드는 균등분할이 중요

실패를 체크하는 테스트 코드 작성도 중요함
- 에러가 나야되는데 안나면 문제가 발생하므로!

픽스처를 만들어주는 도구 
인스탄시오 (간단한 픽스처)
픽스처몽키 (고도한 픽스처 만들때, 학습곡선 있음)
픽스처 만드는 것도 자기만의 노하우가 필요함
- 픽스처 + db 삽입 500줄 + 테스트 코드 3줄 << 실제 이런 일이 발생함
그래서 이런걸 자동화하거나 규격화 하는 코드를 만드는 것도 연구를 많이 해야 함(오래 걸림)

테스트 코드는 리턴할 값으로 검증하는 걸로 작성하는 방법을 추천함
리플렉션은 최대한 비추,
제3가자 만든 기능을 테스트할 방법이 없을때만 리플렉션을 어쩔수 없이 사용 권장 (그래도 비추, 차라리 디버거로 파악하셈)

처음에 한번만 가져온 데이터가 테스트 돌때 중간에 더티해지면 이후에 다시 재로딩을 한다
 
6장 굉장히 중요